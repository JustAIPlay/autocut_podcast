# 视频二创 Skills

> 用 Claude Code Skills 做的视频二创工具

## 功能

- **飞书数据读取**：从多维表格获取脚本号、视频链接、原视频文案
- **视频下载**：自动下载对标视频到本地
- **媒体提取**：提取音频，生成字幕（Whisper转录）
- **AI生图**：基于文案调用ComfyUI生成配图
- **视频合成**：音频+字幕+图片 → 1080x1920竖屏视频

## 安装

首次使用前，请运行安装Skill：

```
用户: 安装环境
用户: 初始化
```

AI 会自动检查并安装所需依赖。

### 环境依赖

| 依赖 | 用途 | 是否必需 |
|------|------|----------|
| FFmpeg | 视频处理 | ✅ 必需 |
| Whisper | 字幕生成 | ✅ 必需 |
| Requests | HTTP请求 | ✅ 必需 |
| yt-dlp | 平台视频下载 | ⚠️ 可选 |
| ComfyUI | AI生图 | ✅ 必需 |

## 使用

### 1. 读取飞书表格

```
用户: 读取飞书表格
```

返回数据列表（脚本号、视频链接、原视频文案）

### 2. 下载视频

```
用户: 下载视频 https://xxx.com/video.mp4，脚本号001
```

### 3. 提取媒体

```
用户: 提取媒体，脚本号001
```

提取音频到 `/audios/001.mp3`，生成字幕到 `/captions/001.srt`

### 4. 生成配图

```
用户: 生图，脚本号001，文案是"..."
```

基于文案调用ComfyUI生成配图到 `/images/001.png`

### 5. 合成视频

```
用户: 合成视频，脚本号001
```

输出最终视频到 `/outputs/001_final.mp4`（1080x1920，白字黑边）

## Skill 清单

| Skill | 功能 | 触发词 |
|-------|------|--------|
| `video:安装` | 环境准备、依赖安装、验证环境 | 安装、环境准备、初始化 |
| `feishu:读取` | 从飞书多维表格读取数据 | 读取飞书、获取表格 |
| `video:下载` | 下载视频到本地 | 下载视频 |
| `media:提取` | 提取音频和字幕 | 提取媒体、提取音视频 |
| `comfyui:生图` | ComfyUI API生成配图 | 生图、生成封面 |
| `video:合成` | 合成最终视频 | 合成视频、剪辑 |

## 依赖

- **FFmpeg**：视频处理（下载、提取、合成）
- **Whisper**：语音识别生成字幕
- **ComfyUI API**：AI生图（`http://127.0.0.1:8188`）
- **飞书API**：读取多维表格数据

## 工作流

```
feishu:读取 → 获取表格数据（脚本号+视频链接+原视频文案）
    ↓
video:下载 → 下载视频到 /videos/{脚本号}.mp4
    ↓
media:提取 → 提取音频到 /audios/{脚本号}.mp3
            → 生成字幕到 /captions/{脚本号}.srt
    ↓
comfyui:生图 → 基于文案生成配图到 /images/{脚本号}.png
    ↓
video:合成 → 合成视频到 /outputs/{脚本号}_final.mp4
```

## 目录结构

```
autocut_podcast/
├── videos/        # 下载的原始视频
├── audios/        # 提取的音频
├── captions/      # 字幕文件
├── images/        # 生成的配图
└── outputs/       # 最终视频
```

## License

MIT
