# 📝 提示词管理中心

本文件夹统一管理项目中所有的 AI 提示词模板。

## 📂 文件结构

### 🎬 分镜相关

| 文件 | 用途 | 使用脚本 | AI 模型 |
|------|------|----------|---------|
| `prompt_scene_split.md` | 场景拆分 | `analyze_scenes.py` (步骤1) | Poe API |
| `prompt_image_generation.md` | 生成生图提示词 | `analyze_scenes.py` (步骤2) | Poe API |
| `scene_split_and_prompts_legacy.md` | 旧版合并提示词（已弃用） | `analyze_gemini.py` | Gemini API |
| `scene_split_and_prompts_sample.md` | 示例提示词（参考） | - | - |

### 📄 字幕相关

| 文件 | 用途 | 使用脚本 | AI 模型 |
|------|------|----------|---------|
| `refine_subtitles.md` | 字幕优化主提示词 | `refine_subtitles.py` | DeepSeek |
| `refine_subtitles_system.md` | 字幕优化系统提示 | `refine_subtitles.py` | DeepSeek |

## 🎯 使用指南

### 修改提示词
所有提示词都可以根据需求自定义：
1. 打开对应的 `.md` 文件
2. 编辑提示词内容
3. 保存后立即生效（无需重启）

### 变量占位符
提示词中可使用以下占位符（会在运行时自动替换）：

| 占位符 | 说明 | 示例 |
|--------|------|------|
| `{text}` | 原始文案内容 | 用于场景拆分 |
| `{scenes}` | 场景列表 JSON | 用于生成提示词 |
| `{raw_text}` | 待优化的字幕文本 | 用于字幕优化 |

## 📋 提示词设计原则

### 1. 场景拆分 (`prompt_scene_split.md`)
- **目标**：将长文案拆分为 15-40 字的分镜段落
- **核心要求**：
  - 不改变原句意思
  - 保持叙事完整性
  - 每段添加序号
- **输出格式**：JSON 数组

### 2. 生图提示词 (`prompt_image_generation.md`)
- **目标**：为每个场景生成详细的 AI 绘图描述
- **核心要求**：
  - 油画风格统一
  - 符号规范（只用《》、逗号、句号）
  - 第一张图要吸引人
- **输出格式**：JSON 数组（包含 prompt 字段）

### 3. 字幕优化 (`refine_subtitles.md`)
- **目标**：纠错 + 优化断句
- **核心要求**：
  - 不改变原意
  - 每行 ≤15 字
  - 保留标点符号
- **输出格式**：纯文本（每行一句）

## 🔧 维护建议

### 定期检查
- ✅ 提示词是否符合最新的 AI 模型要求
- ✅ 输出格式是否与脚本解析逻辑一致
- ✅ 示例是否清晰易懂

### 版本控制
- 重大修改前备份原提示词
- 在文件顶部添加修改记录
- 使用 Git 追踪变更历史

### 调试技巧
如果 AI 输出不符合预期：
1. 检查提示词是否清晰明确
2. 增加示例（特别是边界情况）
3. 使用更严格的格式约束
4. 调整 AI 模型参数（temperature、max_tokens）

## 📞 相关文档
- `../POE_API_升级说明.md` - Poe API 使用指南
- `../CLAUDE.md` - 项目架构说明
- `../快速上手调试.md` - 调试流程

---

**最后更新**: 2026-01-29  
**维护者**: 项目团队
